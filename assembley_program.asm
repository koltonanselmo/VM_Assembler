; OVER AND UNDERFLOW VALUES
UNDERFLOW .INT -1999
OVERFLOW .INT -999
; GERNAL VALUES
TESTVALUE .INT 117343
ZERO .INT 0
ONE .INT 1
TWO .INT 2
THREE .INT 3
FOUR .INT 4
FIVE .INT 5
SIX .INT 6
SEVEN .INT 7
EIGHT .INT 8
NINE .INT 9
TEN .INT 10
AT .BYT 64
PLUS .BYT 43
MINUS .BYT 45
SPACE .BYT 32
NEWLINE .BYT 10
NULL .BYT 0
;
SIZE .INT 7
CNT .INT 0
TENTH .INT 0
; C ARRAY BASE ADDRESS IS 73
C .BYT 0
.BYT 0
.BYT 0
.BYT 0
.BYT 0
.BYT 0
.BYT 0
DATA .INT 1
FLAG .INT 0
OPDV .INT 0
;
ZEROB .BYT 48
ONEB .BYT 49
TWOB .BYT 50
THREEB .BYT 51
FOURB .BYT 52
FIVEB .BYT 53
SIXB .BYT 54
SEVENB .BYT 55
EIGHTB .BYT 56
NINEB .BYT 57
;
; STRING DIRECTIVES
NU .BYT 78
BU .BYT 66
OU .BYT 79
;
A .BYT 97
B .BYT 98
LETTERC .BYT 99
D .BYT 100
E .BYT 101
F .BYT 102
G .BYT 103
H .BYT 104
I .BYT 105
J .BYT 106
K .BYT 107
L .BYT 108
M .BYT 109
N .BYT 110
O .BYT 111
P .BYT 112
Q .BYT 113
R .BYT 114
S .BYT 115
T .BYT 116
U .BYT 117
V .BYT 118
W .BYT 119
Y .BYT 120
X .BYT 121
Z .BYT 122
;
;
;
TEMPALPHA .INT 0
TEMPBETA .INT 0
TEMPCHARLIE .INT 0
TEMPDELTA .INT 0
TEMPECHO .INT 0
TEMPFOXTROT .INT 0
TEMPGAMMA .INT 0
TEMPSMAH .INT 0
;
; END OF DIRECTIVES
;
;
; =============================================
;
;
;
;
;
JMP MAIN
;
; OVER AND UNDER FLOW FUNCTOINS
OVERFLOWFOUND LDR 3 OVERFLOW
TRP 1
TRP 0
UNDERFLOWFOUND LDR 3 UNDERFLOW
TRP 1
TRP 0
; END OF OVER UNDER
;
;
;
;
; START OF OPD
OPD ADI 0 0
;
; R4 IS + OR -
; R5 IS TENTH EACH RUN INCREASED BY 10
; R6 IS CURRENT CNT
;
;
LDR 0 ZERO
STR 0 TEMPSMAH
;
;
;
;
LDA 0 ZEROB
LDB 1 0
CMP 1 6
BRZ 1 SETZERO
;
LDA 0 ONEB
LDB 1 0
CMP 1 6
BRZ 1 SETONE
;
LDA 0 TWOB
LDB 1 0
CMP 1 6
BRZ 1 SETTWO
;
LDA 0 THREEB
LDB 1 0
CMP 1 6
BRZ 1 SETTHREE
;
LDA 0 FOURB
LDB 1 0
CMP 1 6
BRZ 1 SETFOUR
;
LDA 0 FIVEB
LDB 1 0
CMP 1 6
BRZ 1 SETFIVE
;
LDA 0 SIXB
LDB 1 0
CMP 1 6
BRZ 1 SETSIX
;
LDA 0 SEVENB
LDB 1 0
CMP 1 6
BRZ 1 SETSEVEN
;
LDA 0 EIGHTB
LDB 1 0
CMP 1 6
BRZ 1 SETEIGHT
;
LDA 0 NINEB
LDB 1 0
CMP 1 6
BRZ 1 SETNINE
;
;
JMP NOTANUM
;
;
SETZERO LDR 0 ZERO
STR 0 TEMPSMAH
JMP OPDFLAGIF
;
SETONE LDR 0 ONE
STR 0 TEMPSMAH
JMP OPDFLAGIF
;
SETTWO LDR 0 TWO
STR 0 TEMPSMAH
JMP OPDFLAGIF
;
SETTHREE LDR 0 THREE
STR 0 TEMPSMAH
JMP OPDFLAGIF
;
SETFOUR LDR 0 FOUR
STR 0 TEMPSMAH
JMP OPDFLAGIF
;
SETFIVE LDR 0 FIVE
STR 0 TEMPSMAH
JMP OPDFLAGIF
;
SETSIX LDR 0 SIX
STR 0 TEMPSMAH
JMP OPDFLAGIF
;
SETSEVEN LDR 0 SEVEN
STR 0 TEMPSMAH
JMP OPDFLAGIF
;
SETEIGHT LDR 0 EIGHT
STR 0 TEMPSMAH
JMP OPDFLAGIF
;
SETNINE LDR 0 NINE
STR 0 TEMPSMAH
JMP OPDFLAGIF
;
;
OPDFLAGIF ADI 0 0
LDR 0 FLAG
LDR 1 ZERO
CMP 0 1
BNZ 0 EXITOPD
;
LDA 0 PLUS
LDB 1 0
CMP 1 4
BRZ 1 POSITIVE
;
LDA 0 MINUS
LDB 1 0
CMP 1 4
BRZ 1 NEGATIVE
;
; TEST FOR UNDERFLOW
MOV 0 11
MOV 1 10
MOV 2 12
CMP 2 1
BLT 2 UNDERFLOW
;
LDR 7 11
JMR 7
;
NEGATIVE ADI 0 0
LDR 0 TEMPSMAH
MUL 0 5
LDR 1 OPDV
SUB 1 0
STR 1 OPDV
LDR 7 11
JMR 7
;
POSITIVE ADI 0 0
LDR 0 TEMPSMAH
MUL 0 5
LDR 1 OPDV
ADD 0 1
STR 0 OPDV
;
;
EXITOPD ADI 0 0
; TEST FOR UNDERFLOW
MOV 0 11
MOV 1 10
MOV 2 12
CMP 2 1
BLT 2 UNDERFLOW
;
LDR 7 11
JMR 7
; END OF OPD
;
;
NOTANUM ADI 0 0
MOV 3 6
TRP 3
LDB 3 SPACE
TRP 3
LDB 3 I 
TRP 3
LDB 3 S
TRP 3
LDB 3 SPACE
TRP 3
LDB 3 N
TRP 3
LDB 3 O 
TRP 3
LDB 3 T
TRP 3
LDB 3 SPACE
TRP 3
LDB 3 A 
TRP 3
LDB 3 SPACE
TRP 3
LDB 3 N 
TRP 3
LDB 3 U 
TRP 3
LDB 3 M 
TRP 3
LDB 3 B 
TRP 3
LDB 3 E 
TRP 3
LDB 3 R 
TRP 3
LDB 3 NEWLINE
TRP 3
;
LDR 0 ONE
STR 0 FLAG
;
; TEST FOR UNDERFLOW
MOV 0 11
MOV 1 10
MOV 2 12
CMP 2 1
BLT 2 UNDERFLOW
;
LDR 7 11
JMR 7
;
;
; START OF FLUSH FUNC 
FLUSH LDR 7 11
;
LDR 0 ZERO
STR 0 DATA
;
TRP 4
STB 3 C
;
FLUSHWHILE LDA 0 C
LDB 1 0
LDA 2 NEWLINE
LDB 3 2
CMP 1 3
BRZ 1 ENDFLUSHWHILE
;
TRP 4
STB 3 C 
JMP FLUSHWHILE
;
ENDFLUSHWHILE ADI 0 0
;
; TEST FOR UNDERFLOW
MOV 0 11
MOV 1 10
MOV 2 12
CMP 2 1
BLT 2 UNDERFLOW
JMR 7
; END OF FLUSH FUNC 
;
;
;
; START OF GETDATA
GETDATA LDR 7 11
STR 11 TEMPALPHA
;
;
GETDATAIF ADI 0 0
LDR 0 CNT
LDR 1 SIZE
SUB 1 0
BRZ 1 GETDATAELSEIF
;
TRP 4
;
LDA 0 C 
LDR 1 CNT
ADD 0 1
STB 3 0
LDR 0 CNT
ADI 0 1
STR 0 CNT
;
JMP ENDGETDATAIF
GETDATAELSEIF LDB 3 NU
TRP 3
LDB 3 U 
TRP 3
LDB 3 M
TRP 3
LDB 3 B
TRP 3
LDB 3 E 
TRP 3
LDB 3 R 
TRP 3
LDB 3 SPACE
TRP 3
LDB 3 T 
TRP 3
LDB 3 O 
TRP 3
TRP 3
LDB 3 SPACE
TRP 3
TRP 3
LDB 3 BU
TRP 3
LDB 3 I 
TRP 3
LDB 3 G
TRP 3
LDB 3 NEWLINE
TRP 3
;
STR 7 TEMPALPHA
STR 8 TEMPBETA
STR 9 TEMPCHARLIE
STR 10 TEMPDELTA
STR 11 TEMPECHO
STR 12 TEMPFOXTROT
;
MOV 5 10
ADI 5 -8
CMP 5 9
BLT 5 OVERFLOWFOUND
; OVERFLOW TEST DONE
;
MOV 3 11
MOV 11 10
ADI 10 -4
STR 3 10
ADI 10 -4
MOV 1 8
ADI 1 36
STR 1 11
JMP FLUSH
LDR 7 TEMPALPHA
ENDGETDATAIF ADI 0 0
;
;
; TEST FOR UNDERFLOW
MOV 0 11
MOV 1 10
MOV 2 12
CMP 2 1
BLT 2 UNDERFLOW
JMR 7
; END OF GETDATA
;
;
;
; START OF RESET FUNC
RESET LDR 7 11
MOV 1 2
LDR 2 ZERO
; R2 IS K
RESETFOR LDR 3 SIZE
SUB 3 2
BLT 3 ENDRESETFOR
;
LDA 4 C
ADD 4 2
LDB 5 NULL
STB 5 4
ADI 2 1
;
LDR 0 ONE
STR 0 DATA
LDR 0 ZERO
STR 0 OPDV
STR 0 CNT
STR 0 FLAG
;
ENDRESETFOR ADI 6 0
; TEST FOR UNDERFLOW
MOV 0 11
MOV 1 10
MOV 2 12
CMP 2 1
BLT 2 UNDERFLOW
JMR 7
; END OF RESET FUNC
;
;
;
;
;
;
;
;
;
;
;
; MAIN FUNC
MAIN MOV 5 10
ADI 5 -8
CMP 5 9
BLT 5 OVERFLOWFOUND
; OVERFLOW TEST DONE
; VARS
LDR 0 ONE
LDR 2 ZERO
;
MOV 3 11
MOV 11 10
ADI 10 -4
STR 3 10
ADI 10 -4
MOV 1 8
ADI 1 36
STR 1 11
JMP RESET
; END OF RESET CALL AND START OF GETDATA CALL
MOV 5 10
ADI 5 -8
CMP 5 9
BLT 5 OVERFLOWFOUND
; OVERFLOW TEST DONE
;
MOV 3 11
MOV 11 10
ADI 10 -4
STR 3 10
ADI 10 -4
MOV 1 8
ADI 1 36
STR 1 11
JMP GETDATA
;
;
;
; +++++++++++++++
; CHECKING FOR C[0] != @
WHI1 LDA 0 C
LDB 1 0
LDA 2 AT
LDB 3 2
CMP 1 3
BRZ 1 EWHI1
;
; CHECKING FOR +\- IN C[0]
LDA 0 C
LDB 1 0
LDA 4 PLUS
LDB 5 4
LDA 6 MINUS
LDB 7 6
CMP 5 1
CMP 7 1
BRZ 5 IF1
BRZ 7 IF1
;
JMP EI1
;
;
IF1 ADI 0 0
; IF 1 LOGIC
MOV 5 10
ADI 5 -8
CMP 5 9
BLT 5 OVERFLOWFOUND
; OVERFLOW TEST DONE
;
MOV 3 11
MOV 11 10
ADI 10 -4
STR 3 10
ADI 10 -4
MOV 1 8
ADI 1 36
STR 1 11
JMP GETDATA
;
;
;
JMP WHI2
;
; END OF IF 1 LOGIC
EI1 ADI 0 0
; EI1 LOGIC
LDB 0 C
LDA 1 C 
ADI 1 1
STB 0 1
ADI 1 -1
LDB 2 PLUS
STB 2 1
;  
LDR 0 CNT
ADI 0 1
STR 0 CNT
;
;
; END OF EI1 LOGIC
WHI2 ADI 0 0
; WHI2 LOGIC
LDR 0 DATA
LDR 1 ONE
CMP 0 1
BNZ 0 EWHI2
;
IF2 ADI 0 0
; IF 2 LOGIC
; IF TWO CONDITIONAL STAMENT
LDA 0 NEWLINE
LDB 1 0
LDA 2 C
LDR 4 CNT
ADI 4 -1
ADD 2 4
LDB 3 2
CMP 3 1
BNZ 3 EI2
;
LDR 0 ZERO
STR 0 DATA
LDR 0 ONE
STR 0 TENTH
LDR 0 CNT
ADI 0 -2
STR 0 CNT
;
WHI3 ADI 0 0
; WHILE 3 CONDITIONS
LDR 0 CNT
ADI 0 -1
BLT 0 IF3
LDR 0 FLAG
LDR 1 ZERO
CMP 0 1
BNZ 0 IF3
; END OF CONDITIONS
MOV 5 10
ADI 5 -8
CMP 5 9
BLT 5 OVERFLOWFOUND
; OVERFLOW TEST DONE
; VARS
LDA 0 C
LDB 4 0
LDR 5 TENTH
LDA 0 C 
LDR 1 CNT
ADD 0 1
LDB 6 0
;
;
MOV 0 11
MOV 11 10
ADI 10 -4
STR 0 10
ADI 10 -4
MOV 1 8
ADI 1 36
STR 1 11
JMP OPD
;
LDR 0 CNT
ADI 0 -1
STR 0 CNT
LDR 0 TENTH
LDR 1 TEN
MUL 0 1
STR 0 TENTH
;
JMP WHI3
;
EWHI3 ADI 0 0
;
IF3 ADI 0 0
LDR 0 FLAG
LDR 1 ZERO
CMP 0 1
BNZ 0 WHI2
LDB 3 OU
TRP 3
LDB 3 P
TRP 3
LDB 3 E
TRP 3
LDB 3 R
TRP 3
LDB 3 A 
TRP 3
LDB 3 N 
TRP 3
LDB 3 D 
TRP 3
LDB 3 SPACE
TRP 3
LDB 3 I 
TRP 3
LDB 3 S
TRP 3
LDB 3 SPACE
TRP 3
LDR 3 OPDV
TRP 1
LDB 3 NEWLINE
TRP 3
; NEED TO ADD STRING ABOVE BBB TEMP
JMP WHI2
;
; END OF IF 2 LOGIC
EI2 ADI 0 0
; ELSE 2 LOGIC
MOV 5 10
ADI 5 -8
CMP 5 9
BLT 5 OVERFLOWFOUND
; OVERFLOW TEST DONE
;
MOV 3 11
MOV 11 10
ADI 10 -4
STR 3 10
ADI 10 -4
MOV 1 8
ADI 1 36
STR 1 11
JMP GETDATA
;
JMP WHI2
; END OF WHI2 LOGIC
;
JMP WHI2
EWHI2 ADI 0 0
;
MOV 5 10
ADI 5 -8
CMP 5 9
BLT 5 OVERFLOWFOUND
; OVERFLOW TEST DONE
; VARS
LDR 0 ONE
LDR 2 ZERO
;
MOV 3 11
MOV 11 10
ADI 10 -4
STR 3 10
ADI 10 -4
MOV 1 8
ADI 1 36
STR 1 11
JMP RESET
;
;
MOV 5 10
ADI 5 -8
CMP 5 9
BLT 5 OVERFLOWFOUND
; OVERFLOW TEST DONE
;
MOV 3 11
MOV 11 10
ADI 10 -4
STR 3 10
ADI 10 -4
MOV 1 8
ADI 1 36
STR 1 11
JMP GETDATA
;
;
JMP WHI1
;
TRP 0
EWHI1 ADI 0 0
TRP 0
; END OF MAIN